dynamic routing:	
	* Ao contrário do routing estático, no routing dinâmico, é o próprio router que anuncia que é para ele que devem ser enviados os pacotes.
	
	
	
	no ex1, na interface f1/0 do router 3:
		devido a limitações do rip v1, vai aparecer no router (show run probably) como 192.168.3.0/24 <-- em vez de /25 (dunno why mas sao limitaçoes)
		
		
	com o ripV1, como vemos na captura de pacotes, os pacotes sao enviados para o broadcast (255.255.255.255), enquanto que com o ripV2 ele vai enviar para outro (224.0.0.9), que é o multicast, que so vai ser enviado/recebido por router que estao a correr o protocolo rip
	
	O rip so permite métricas até 15, usa o 16 para informar que a rede foi abaixo
	
	Na tabela de encaminhamento (show route) apenas aparecem as rotas de menor custo, por isso é que é possivel definir as prioridades [mais na nota do ponto 1.8 do pdf desta aula]
	Quando existem 2 ou mais caminhos com o mesmo custo, o router tenta dividir os pacotes de forma a enviar de maneira "igual" para cada caminho, não colocando cargas de banda tão altas em apenas um route.
	
	
	
	1.2.	(1>>)
		Enquanto que no router 1 o que inserimos no configure terminal foi:
	>> .. (config)# network 10.1.2.0
	>> .. (config)# network 10.1.3.0
	>> .. (config)# network 192.168.1.0
		O que nos aparece ao fazermos show run na parte do rip é o seguinte:
	router rip
 	version 1
 	network 10.0.0.0		#R:# OS DOIS 10.1. .. MERGIRAM NA REDE MAIOR 
 	network 192.168.1.0

		(2>>)
		Os /32 são as próprias interfaces
		As rotas para os /24 sao simplificadas para .. .0
		no caso do router 3 temos aquele cenário falado em cima em que o /25 vira um /24
		Ele agrupa nas subredes maiores (?)
		
		(3>>) acima
		
		(4>>) Os routers definem as máscaras das subredes conforme a máscara dos pacotes recebidos por ripV1
	
	
	
	1.3.	(1>>)
		(comparar as periodicidades dos routers correspondentes, nao todos os pacotes uns com os outros ofc)
		por norma,tem uma periodicidade de um valor aleatorio por volta de 20 - 30 segundos
		
		(2>>)
		faz uso do protocolo ipv4 e os pacotes são enviados com destino ao 255.255.255.255 (que é o endereço de broadcast); usa o port 520 (é para onde está predefinido)
		
		
		
	1.4.	[ver nota de destaque "no auto-summary" no pdf para saber o que faz]
	Agora as máscaras aparecem corretamente nas routing tables devido ao RIPv2 e ao no auto-summary;
		o RIPv2 permite que as máscaras corretas sejam enviadas [de onde o router retira a mascara], e o no auto-summary força o router a apresentar a máscara correta;
	
	
	
	1.5.	(1>>) 
		São agora recebidos pacotes do protocolo RIPv2; a periodicidade é mais ou menos a mesma, por volta dos 30 segundos entre os mesmos routers;
		(2>>)
		O RIPv2, ao contrário do RIPv1 (como já foi referido acima) vai enviar os pacotes com destino para 224.0.0.9, que é o endereço do multicast, que apenas os routers com rip protocol vão receber. Continua a usar o protocolo de IPv4 para transporte de pacotes, e usa o mesmo port number que o RIPv1.
		(3>>)
		[os custos são vistos dentro de "Routing" na captura]
		metric = custo (interno do RIP)
		
		nota:	o custo (distancia administrativa) do rip é 120 [acho], e dentro do rip existe o custo de cada um deles, que aparece em "metric"
		
	
	1.6.	no wireshark vai aparecer metric 16 (morreu)
	
	
	(acabar os ultimos exercicios - rapidos de se fazer +  notas acima)
	
	
______________________________________________________________________________________________

IPv4 Dynamic Routing with OSPFv2:

	notas:
	
	inicialmente, à medida em que configuramos os routers com ospf, o router que for configurado primeiro fica como designated router e o segundo como backup (alegadamente). Apenas quando desligarmos os router e os voltarmos a ligar (ao mesmo tempo) é que eles vão trocar 'hello's' entre eles de modo a decidir qual deles será o designated router (maior id)
	
	as areas sao o conjunto de redes ospf (show ip ospf interface). Aqui colocámos na area 0 mas é possivel configurar de tal modo em que cada interface fique em areas diferentes
	
	
	

	2.1. (nada a apontar)
	
	
	
	2.2.	os router ID verificam se no comando [ sh ip ospf interface ] logo no começo
		os DR (designated router) e BDR (backup DR) e os custos também
		neste caso, o DR e BDR de cada rede receberam este "cargo" pela ordem de configuração
		
	
		
	2.3.	(temos agora uma mudança nos routers id para o que colocámos:
	Router 1 - 1.1.1.1
	Router 2 - 2.2.2.2
	Router 3 - 3.3.3.3 (maior id -> maior prioridade na rede)
	
	-->	Como desligámos e voltámos a ligar os routers, houve agora uma 'eleição' do designated router -> em cada rede, o que tivesse maior router id ficava como DR e o segundo maior como BDR [todos os outros ficam classificados como other - DROTH]
	
	
	
	2.4.	(as mundaças verificam se nos pacotes [pretos] em Open Shortest Path First -> LS Update Packet -> LSA-type 2)
	
	ao dar shutdown à interface f0/1 do router 1, a rede perde o seu SDR (o router 1 deixa de ver essa interface e subsequentemente a rede) e então é encontrado um path alternativo (à volta) e isso tudo é anunciado através dos pacotes de update
	
	
	2.5.	
	...
	
	
	
	2.6.
	antes: (custo 2)
	
      192.168.3.0/25 is subnetted, 1 subnets
O        192.168.3.0 [110/3] via 10.2.3.3, 00:00:10, FastEthernet0/0
                     [110/3] via 10.1.2.1, 00:02:14, FastEthernet0/1

	
	depois:	(custo 50)

      192.168.3.0/25 is subnetted, 1 subnets		
O        192.168.3.0 [110/3] via 10.2.3.3, 00:00:26, FastEthernet0/0

	nos pacotes de update capturados no wireshark podemos ver a metrica a aumentar para 50 na interface correspondente :D
	
	
	
	2.7.
	o que foi feito foi definir o router 1 como a saida default para a internet, no ip show route nada muda no router 1, mas nos outros routers, é adicionado o ip route com a rota 0.0.0.0
	
	
______________________________________________________________________________________________

IPv6 Dynamic Routing

	3.1.
	não existem ainda neighbors porque ainda não foram trocados pacotes;
	
	
	só é possivel dar ping às interfaces do proprio router porque ainda não foram estabelecidos quaisquer routings ipv6
	
______________________________________________________________________________________________

OSPFv3
	
	OSPFv3 (?)

no ip route
E = external
IA = inter area
	
	4.1.
	show ipv6 ospf 1 database network
	
	-> cada um dos "blocos" são as redes (cada switch), não tem nada a ver necessáriamente com o próprio router
		os attached routers são os router em contacto direto
		com cada switch :)
	daqui precisamos de tirar que pouca coisa tem de IPv6 e que é bastante semelhante ao IPv4 (as conclusoes a tirar sao as mesmas)
	
	o mesmo com os outros "show" ig
	
	
	
	4.2. 
	same shit que dar clear em IPv4
	
	
	4.3.
	aparece no show ipv6 route dos outros routers como OE2 (external)	
	
	
______________________________________________________________________________________________

	OSPFv2 with Multiple Areas
	
	(a configuração de áreas é feita nas interfaces)
	- sao configurados nas interfaces mas são as redes que pertencem às áreas;
	
	
		
	5.1.
	nas rotas do router, os ips em outras areas aparecem como IA (inter area), o que significa que são do mesmo processo [ospf] mas de areas diferentes. Logo, só são ips conhecidos através de outros routers. Por exemplo, o router 1 não sabe que o router 2 existe, apenas que os seus ips existem por causa do router 3 (mas nao sabe que sao do router 2).
	
	
	5.2
	show ip ospf database
	após definir as outras areas e fazer clear, aparecem agora as databases corretas (areas)
	aparece como estando na rota 51 os ips das outras áreas mas o router não sabe de que área são, apenas os conhece porque lhe foram passados (direta ou indiretamente) pelo advertising router (no caso do router1, pelo router 3)
		

	
	
	ao definir o default para a net cuidado que o router 1 ja tinha isso, tem que se tirar primeiro porque senao ele nao o ira reconhecer no router 2
	

OSPFv2 External Routes Redistribution

	6.2.
	show ip ospf
		> podemos ver as areas presentes em cada router 
	-- no router 1 o backbone (0) [area 0] aparece como inativo e apenas mostra a area 51
	-- ...
	
	
	6.3	______________________________________________________________________________________________



(ultima parte do guiao)
:::
temos um novo router na area 0;;
vamos ter agora processos de ospf diferentes (1 e 2) e o router 1 vai servir de ponte de ligação entre ambos os processos (ig)

vamos ter distribuiçao num sentido e advertisement das redes noutro (na ponte de ligação)
 	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
